{"version":3,"sources":["webpack:///webpack/bootstrap cfd6e7e9b969dcaedf1d","webpack:///./src/main.js","webpack:///./app.js","webpack:///./src/directives.js","webpack:///./src/filters.js"],"names":["prefix","selector","Object","keys","map","d","join","Seed","opts","self","root","el","document","getElementById","id","els","querySelectorAll","bindings","scope","forEach","call","processNode","key","cloneAttributes","attributes","attr","directive","parseDirective","bindDirective","name","value","seed","removeAttribute","binding","undefined","directives","push","bind","hasOwnProperty","bindAccessors","defineProperty","get","set","filters","applyFilters","update","argument","indexOf","noprefix","slice","length","argIndex","dirname","def","arg","exp","pipeIndex","trim","split","filter","definition","customFilter","create","app","msg","hello","changeMessage","text","textContent","show","style","display","class","classname","classList","on","handler","event","handlers","removeEventListener","addEventListener","unbind","selectors","e","match","every","target","webkitMatchesSelector","apply","arguments","capitalize","toString","charAt","toUpperCase"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cfd6e7e9b969dcaedf1d","var prefix      = 'sd'\nimport Directives from './directives'\nimport Filters from './filters'\ndebugger;\nvar selector    = Object.keys(Directives).map(function (d) {\n    return '[' + prefix + '-' + d + ']'\n}).join()\n\nfunction Seed (opts) {\n    var self = this,\n        root = this.el = document.getElementById(opts.id),\n        els  = root.querySelectorAll(selector),\n        bindings = {} // internal real data\n\n    self.scope = {} // external interface\n\n    // process nodes for directives\n    ;[].forEach.call(els, processNode)\n    processNode(root)\n\n    // initialize all variables by invoking setters\n    for (var key in bindings) {\n        self.scope[key] = opts.scope[key]\n    }\n\n    function processNode (el) {\n        cloneAttributes(el.attributes).forEach(function (attr) {\n            var directive = parseDirective(attr)\n            if (directive) {\n                bindDirective(self, el, bindings, directive)\n            }\n        })\n    }\n}\n\n// clone attributes so they don't change\nfunction cloneAttributes (attributes) {\n    return [].map.call(attributes, function (attr) {\n        return {\n            name: attr.name,\n            value: attr.value\n        }\n    })\n}\n\n// 带上处理完的指令directive 继续处理\nfunction bindDirective (seed, el, bindings, directive) {\n    el.removeAttribute(directive.attr.name)\n    var key = directive.key,\n        binding = bindings[key]\n    if (!binding) {\n        bindings[key] = binding = {\n            value: undefined,\n            directives: []\n        }\n    }\n    directive.el = el\n    binding.directives.push(directive)\n    // invoke bind hook if exists\n    if (directive.bind) {\n        directive.bind(el, binding.value) //？ bind 什么意思\n    }\n    if (!seed.scope.hasOwnProperty(key)) {\n        bindAccessors(seed, key, binding)\n    }\n}\n\nfunction bindAccessors (seed, key, binding) {\n    Object.defineProperty(seed.scope, key, {\n        get: function () {\n            return binding.value\n        },\n        set: function (value) {\n            binding.value = value\n            binding.directives.forEach(function (directive) {\n                if (value && directive.filters) {\n                    value = applyFilters(value, directive)\n                }\n                directive.update(\n                    directive.el,\n                    value,\n                    directive.argument,\n                    directive,\n                    seed\n                )\n            })\n        }\n    })\n}\n\n// 处理dom每一个 attribute，带“-”的 带“|”的\nfunction parseDirective (attr) {\n\n    if (attr.name.indexOf(prefix) === -1) return\n\n    // parse directive name and argument\n    var noprefix = attr.name.slice(prefix.length + 1),\n        argIndex = noprefix.indexOf('-'),\n        dirname  = argIndex === -1\n            ? noprefix\n            : noprefix.slice(0, argIndex), // 这个干嘛用呢\n        def = Directives[dirname], //框架是否存在这个指令\n        arg = argIndex === -1\n            ? null\n            : noprefix.slice(argIndex + 1) //获取 “-” 后面的内容\n\n    // parse scope variable key and pipe filters\n    var exp = attr.value,\n        pipeIndex = exp.indexOf('|'),\n        key = pipeIndex === -1\n            ? exp.trim()\n            : exp.slice(0, pipeIndex).trim(),\n        filters = pipeIndex === -1\n            ? null\n            : exp.slice(pipeIndex + 1).split('|').map(function (filter) {\n                return filter.trim()\n            })\n\n    return def\n        ? {\n            attr: attr,\n            key: key,\n            filters: filters,\n            definition: def,\n            argument: arg, // ?\n            update: typeof def === 'function'  // ?\n                ? def\n                : def.update // ? 不理解\n        }\n        : null\n}\n\nfunction applyFilters (value, directive) {\n    if (directive.definition.customFilter) {\n        return directive.definition.customFilter(value, directive.filters)\n    } else {\n        directive.filters.forEach(function (filter) {\n            if (Filters[filter]) {\n                value = Filters[filter](value)\n            }\n        })\n        return value\n    }\n}\n\nexport default {\n    create: function (opts) {\n        return new Seed(opts)\n    },\n    filters: Filters,\n    directives: Directives\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Seed from './src/main.js'\n\n (function(){\n   var app = Seed.create({\n       id: 'test',\n       // template\n       scope: {\n           msg: 'hello',\n           hello: 'WHWHWHW',\n           changeMessage: function () {\n               app.scope.msg = 'hola'\n           }\n       }\n   })\n })()\n\n\n\n// WEBPACK FOOTER //\n// ./app.js","export default {\n    text: function (el, value) {\n        el.textContent = value || ''\n    },\n    show: function (el, value) {\n        el.style.display = value ? '' : 'none'\n    },\n    class: function (el, value, classname) {\n        el.classList[value ? 'add' : 'remove'](classname)\n    },\n    on: {\n        update: function (el, handler, event, directive) {\n            if (!directive.handlers) {\n                directive.handlers = {}\n            }\n            var handlers = directive.handlers\n            if (handlers[event]) {\n                el.removeEventListener(event, handlers[event])\n            }\n            if (handler) {\n                handler = handler.bind(el)\n                el.addEventListener(event, handler)\n                handlers[event] = handler\n            }\n        },\n        unbind: function (el, event, directive) {\n            if (directive.handlers) {\n                el.removeEventListener(event, directive.handlers[event])\n            }\n        },\n        customFilter: function (handler, selectors) {\n            return function (e) {\n                var match = selectors.every(function (selector) {\n                    return e.target.webkitMatchesSelector(selector) //匹配一个字符串，匹配成功返回true\n                })\n                if (match) handler.apply(this, arguments)\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/directives.js","export default  {\n    capitalize: function (value) {\n        value = value.toString()\n        return value.charAt(0).toUpperCase() + value.slice(1)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters.js"],"sourceRoot":""}